\subchapter{Operacja wstawiania}

\exercise %13.3-1
Pokolorowanie węzła $z$ na czarno mogłoby spowodować naruszenie własności 5 drzewa czerwono-czarnego, podczas gdy procedura \proc{RB-Insert-Fixup} operuje na drzewie, w~którym własność ta jest zachowana i~nie narusza jej w~trakcie swojego działania.

\exercise %13.3-2
Na rys.\ \ref{fig:13.3-2} zilustrowano ciąg operacji wstawiania węzłów do drzewa czerwono-czarnego.
\begin{figure}[ht]
	\centering \input{fig13.3-2}
	\caption{Drzewa czerwono-czarne powstałe po wstawieniu elementów 41, 38, 31, 12, 19, 8 kolejno do początkowo pustego drzewa.
	{\sffamily\bfseries(a)} Po wstawieniu pierwszego elementu drzewo składa się tylko z~korzenia, który początkowo ma kolor czerwony.
	Przywrócenie własności 2 drzewa czerwono-czarnego następuje w~linii 16 procedury \proc{RB-Insert-Fixup}.
	{\sffamily\bfseries(b)} Dodanie węzła o~kluczu 38 nie powoduje naruszenia żadnej własności drzewa czerwono-czarnego.
	{\sffamily\bfseries\doubledash{(c)}{(f)}} Wstawienie każdego kolejnego elementu produkuje drzewo, w~którym naruszona jest własność 4, przywracana następnie za pomocą procedury \proc{RB-Insert-Fixup}.} \label{fig:13.3-2}
\end{figure}

\exercise %13.3-3
Wersja rysunków 13.5 i~13.6 z~Podręcznika z~podanymi czarnymi wysokościami węzłów została zaprezentowana na rys.\ \ref{fig:13.3-3}.
Wynika z~niego, że własność 5 drzewa czerwono-czarnego faktycznie pozostaje zachowana podczas działania procedury \proc{RB-Insert-Fixup}.
\begin{figure}[ht]
	\centering \input{fig13.3-3}
	\caption{{\sffamily\bfseries\doubledash{(a)}{(b)}} Rys.\ 13.5 z~Podręcznika uzupełniony o~czarne wysokości poszczególnych węzłów drzewa.
	{\sffamily\bfseries(c)} Uzupełniony rys.\ 13.6.} \label{fig:13.3-3}
\end{figure}

\exercise %13.3-4
Jedyny węzeł, który jest kolorowany na czerwono w~trakcie działania procedury \proc{RB-Insert-Fixup} to \attrib{\attrib{z}{p}}{p}.
Pętla \kw{while} w~tej procedurze wykonuje się tylko wtedy, gdy $z$ nie jest korzeniem.
Z~dowodu niezmiennika pętli \kw{while} wynika, że jeśli naruszona jest własność 2, to tylko wówczas, gdy $z$ jest korzeniem i~jest czerwony.
A~zatem kolorowanie węzła \attrib{\attrib{z}{p}}{p} na czerwono odbywa się jedynie w~przypadku, gdy \attrib{z}{p} jest czerwony i~nie jest to korzeń.
Stąd mamy, że węzeł \attrib{\attrib{z}{p}}{p} nie jest wartownikiem \attrib{T}{nil}, więc procedura \proc{RB-Insert-Fixup} nigdy nie przypisze wartownikowi koloru \const{red}.

\exercise %13.3-5
\exercise %13.3-6
