\begin{tikzpicture}[
	index node/.append style = {minimum size=2mm, text height=1.5ex, node distance=0.5mm and 0.5mm},
	row 1/.style = {nodes={fill=black!40, minimum size=3.5mm}},
	light cell/.style = {row 1 column #1/.style={nodes={fill=black!20}}},
	outer/.append style = {node distance=12mm and 8mm},
	arrow/.append style = {<-}
]

\newcommand\toparrow[1]{%
	\draw[arrow] (arr-1-#1.south) -- +(0mm, -7mm) node[below, index node] {$\attrib{S}{top}=#1$};
}
\newcommand\arrayindexes{%
	\foreach \x in {1, ..., 6} {
		\node[index node, above=of arr-1-\x] {\x};
	}
	\node[left=2mm of arr-1-1.west] {$S$};
}

\node[outer] (pic a) {
\begin{tikzpicture}
	\matrix[array] (arr) { & & & & & \\};
	\arrayindexes
	\draw[arrow] (arr-1-1.south) ++ (-3.5mm, 0mm) -- +(0mm, -7mm) node[below, index node] {$\attrib{S}{top}=0$};
\end{tikzpicture}
};

\node[outer, right=of pic a] (pic b) {
\begin{tikzpicture}
	\matrix[
		array,
		light cell/.list = {1}
	] (arr) {4 & & & & & \\};
	\arrayindexes
	\toparrow{1}
\end{tikzpicture}
};

\node[outer, right=of pic b] (pic c) {
\begin{tikzpicture}
	\matrix[
		array,
		light cell/.list = {1,2}		
	] (arr) {4 & 1 & & & & \\};
	\arrayindexes
	\toparrow{2}
\end{tikzpicture}
};

\node[outer, right=of pic c] (pic d) {
\begin{tikzpicture}
	\matrix[
		array,
		light cell/.list = {1,2,3}
	] (arr) {4 & 1 & 3 & & & \\};
	\arrayindexes
	\toparrow{3}
\end{tikzpicture}
};

\node[outer, below=of pic a.south east, anchor=north east] (pic e) {
\begin{tikzpicture}
	\matrix[
		array,
		light cell/.list = {1,2}
	] (arr) {4 & 1 & 3 & & & \\};
	\arrayindexes
	\toparrow{2}
\end{tikzpicture}
};

\node[outer, right=of pic e] (pic f) {
\begin{tikzpicture}
	\matrix[
		array,
		light cell/.list = {1,2,3}		
	] (arr) {4 & 1 & 8 & & & \\};
	\arrayindexes
	\toparrow{3}
\end{tikzpicture}
};

\node[outer, right=of pic f] (pic g) {
\begin{tikzpicture}
	\matrix[
		array,
		light cell/.list = {1,2}
	] (arr) {4 & 1 & 8 & & & \\};
	\arrayindexes
	\toparrow{2}
\end{tikzpicture}
};

\foreach \x in {c,d,e,f,g} {
	\node[subpicture label, below=2mm of pic \x.south] (label \x) {(\x)};
}
\node[subpicture label] at (label e |- label c) {(a)};
\node[subpicture label] at (label f |- label c) {(b)};

\end{tikzpicture}
