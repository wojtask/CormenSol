\subchapter{Opis algorytmu}

\exercise %7.1-1
\note{Rozwiązanie dotyczy przykładu z~tekstu oryginalnego.}

\noindent Rys.\ \ref{fig:7.1-1} przedstawia działanie procedury \proc{Partition} dla tablicy $A$.
\begin{figure}[!ht]
	\centering \input{fig7.1-1}
	\caption{Działanie procedury \proc{Partition} dla tablicy $A=\langle13,19,9,5,12,8,7,4,21,2,6,11\rangle$.
{\sffamily\bfseries(a)} Tablica wejściowa z~zaznaczonymi początkowymi wartościami zmiennych.
{\sffamily\bfseries(b)\nbendash(l)} Kolejne iteracje pętli \kw{for} w~wierszach 3\nbendash6.
{\sffamily\bfseries(m)} Wynikowa tablica $A$ po wykonaniu zamiany z~wiersza 7.} \label{fig:7.1-1}
\end{figure}

\exercise %7.1-2
\note{Poprawną wartością dla\/ $q$ z~treści zadania powinno być\/ $\lfloor(p+r)/2\rfloor$.}

\noindent Gdy wszystkie elementy $A[p\twodots r]$ mają taką samą wartość, to warunek z~wiersza 4 procedury \proc{Partition} jest spełniony w~każdej iteracji pętli \kw{for}.
Oznacza to, że po wykonaniu pętli zachodzi $i=r-1$ i~procedura zwraca $q=i+1=r$.

Procedurę modyfikujemy przez wprowadzenie do ciała pętli \kw{for} zliczania elementów równych elementowi rozdzielającemu $x$.
Niech $d$ będzie liczbą elementów równych $x$ w~podtablicy $A[p\twodots r]$.
Wynikiem zwracanym przez procedurę będzie wówczas $q=i+1-\lfloor d/2\rfloor$, co dla podtablicy $A[p\twodots r]$ o~jednakowych elementach da $q=r-\lfloor(r-p+1)/2\rfloor=\lfloor(p+r)/2\rfloor$.

\exercise %7.1-3
Podczas przetwarzania podtablicy $A[p\twodots r]$ o~rozmiarze $n=r-p+1$ wykonywanych jest $n-1$ iteracji pętli \kw{for}, a~każda z~nich przeprowadza operacje zajmujące czas stały.
Stąd czas działania procedury \proc{Partition} wynosi $\Theta(n)$.

\exercise %7.1-4
W~warunku z~wiersza 4 procedury \proc{Partition} wystarczy zmienić znak nierówności na przeciwny.
